{
  "$comment": "Exported by onex-change-control export_json_schema.py v1.0.0",
  "$defs": {
    "EnumDriftCategory": {
      "description": "Categories of drift detected in daily reconciliation.\n\nDrift categories classify the type of deviation from planned work:\n- scope: Work scope changed (added/removed features)\n- architecture: Architectural decisions changed\n- interfaces: Interface surfaces changed (events, topics, protocols)\n- dependencies: Dependency versions or relationships changed\n- infra: Infrastructure or environment assumptions changed\n- process: Process or workflow changes",
      "enum": [
        "scope",
        "architecture",
        "interfaces",
        "dependencies",
        "infra",
        "process"
      ],
      "title": "EnumDriftCategory",
      "type": "string"
    },
    "EnumInvariantStatus": {
      "description": "Status values for ONEX invariant checks.\n\nInvariant status values:\n- pass: Invariant is satisfied\n- fail: Invariant is violated\n- unknown: Invariant status cannot be determined (requires follow-up)",
      "enum": [
        "pass",
        "fail",
        "unknown"
      ],
      "title": "EnumInvariantStatus",
      "type": "string"
    },
    "EnumPRState": {
      "description": "States for pull requests.\n\nPR states:\n- merged: PR has been merged\n- open: PR is currently open",
      "enum": [
        "merged",
        "open"
      ],
      "title": "EnumPRState",
      "type": "string"
    },
    "ModelDayCloseActualRepo": {
      "description": "Actual work by repository in daily close report.",
      "properties": {
        "prs": {
          "description": "List of PRs",
          "items": {
            "$ref": "#/$defs/ModelDayClosePR"
          },
          "maxItems": 1000,
          "title": "Prs",
          "type": "array"
        },
        "repo": {
          "description": "Repository name (e.g., 'OmniNode-ai/omnibase_core')",
          "maxLength": 10000,
          "title": "Repo",
          "type": "string"
        }
      },
      "required": [
        "repo"
      ],
      "title": "ModelDayCloseActualRepo",
      "type": "object"
    },
    "ModelDayCloseDriftDetected": {
      "description": "Drift detected entry in daily close report.",
      "properties": {
        "category": {
          "$ref": "#/$defs/EnumDriftCategory",
          "description": "Drift category"
        },
        "correction_for_tomorrow": {
          "description": "Specific fix / decision / ticket",
          "maxLength": 10000,
          "title": "Correction For Tomorrow",
          "type": "string"
        },
        "drift_id": {
          "description": "Unique drift identifier",
          "maxLength": 10000,
          "title": "Drift Id",
          "type": "string"
        },
        "evidence": {
          "description": "What changed / where (PRs, commits, files)",
          "maxLength": 10000,
          "title": "Evidence",
          "type": "string"
        },
        "impact": {
          "description": "Why it matters",
          "maxLength": 10000,
          "title": "Impact",
          "type": "string"
        }
      },
      "required": [
        "drift_id",
        "category",
        "evidence",
        "impact",
        "correction_for_tomorrow"
      ],
      "title": "ModelDayCloseDriftDetected",
      "type": "object"
    },
    "ModelDayCloseInvariantsChecked": {
      "description": "Invariants checked in daily close report.",
      "properties": {
        "effects_do_io_only": {
          "$ref": "#/$defs/EnumInvariantStatus",
          "description": "Effects perform I/O only"
        },
        "orchestrators_no_io": {
          "$ref": "#/$defs/EnumInvariantStatus",
          "description": "Orchestrators perform no I/O"
        },
        "real_infra_proof_progressing": {
          "$ref": "#/$defs/EnumInvariantStatus",
          "description": "Real infrastructure proof is progressing"
        },
        "reducers_pure": {
          "$ref": "#/$defs/EnumInvariantStatus",
          "description": "Reducers are pure (no I/O)"
        }
      },
      "required": [
        "reducers_pure",
        "orchestrators_no_io",
        "effects_do_io_only",
        "real_infra_proof_progressing"
      ],
      "title": "ModelDayCloseInvariantsChecked",
      "type": "object"
    },
    "ModelDayClosePR": {
      "description": "Pull request entry in daily close report.",
      "properties": {
        "notes": {
          "description": "Why it matters / what it unblocks",
          "maxLength": 10000,
          "title": "Notes",
          "type": "string"
        },
        "pr": {
          "description": "PR number",
          "minimum": 1,
          "title": "Pr",
          "type": "integer"
        },
        "state": {
          "$ref": "#/$defs/EnumPRState",
          "description": "PR state"
        },
        "title": {
          "description": "PR title",
          "maxLength": 10000,
          "title": "Title",
          "type": "string"
        }
      },
      "required": [
        "pr",
        "title",
        "state",
        "notes"
      ],
      "title": "ModelDayClosePR",
      "type": "object"
    },
    "ModelDayClosePlanItem": {
      "description": "Plan item in daily close report.",
      "properties": {
        "requirement_id": {
          "description": "Requirement identifier",
          "maxLength": 10000,
          "title": "Requirement Id",
          "type": "string"
        },
        "summary": {
          "description": "Summary of the requirement",
          "maxLength": 10000,
          "title": "Summary",
          "type": "string"
        }
      },
      "required": [
        "requirement_id",
        "summary"
      ],
      "title": "ModelDayClosePlanItem",
      "type": "object"
    },
    "ModelDayCloseProcessChange": {
      "description": "Process change entry in daily close report.",
      "properties": {
        "change": {
          "description": "What changed in the process today",
          "maxLength": 10000,
          "title": "Change",
          "type": "string"
        },
        "rationale": {
          "description": "Why we changed it",
          "maxLength": 10000,
          "title": "Rationale",
          "type": "string"
        },
        "replaces": {
          "description": "What it replaces / previous behavior",
          "maxLength": 10000,
          "title": "Replaces",
          "type": "string"
        }
      },
      "required": [
        "change",
        "rationale",
        "replaces"
      ],
      "title": "ModelDayCloseProcessChange",
      "type": "object"
    },
    "ModelDayCloseRisk": {
      "description": "Risk entry in daily close report.",
      "properties": {
        "mitigation": {
          "description": "Short mitigation description",
          "maxLength": 10000,
          "title": "Mitigation",
          "type": "string"
        },
        "risk": {
          "description": "Short risk description",
          "maxLength": 10000,
          "title": "Risk",
          "type": "string"
        }
      },
      "required": [
        "risk",
        "mitigation"
      ],
      "title": "ModelDayCloseRisk",
      "type": "object"
    }
  },
  "description": "Daily close report model.\n\nRepresents a daily reconciliation of plan vs actual work across repos.\n\nSchema Version:\n    The schema_version field uses basic SemVer format (major.minor.patch) only.\n    Pre-release versions (e.g., \"1.0.0-alpha\") and build metadata\n    (e.g., \"1.0.0+build\") are not supported. Leading zeros are rejected\n    per SemVer specification.\n\nImmutability:\n    This model is frozen (immutable) after creation to ensure:\n    1. Historical drift reports cannot be modified after creation\n    2. Thread-safe access from multiple readers\n    3. Safe use as dictionary keys or cache entries",
  "properties": {
    "actual_by_repo": {
      "description": "Actual work by repository",
      "items": {
        "$ref": "#/$defs/ModelDayCloseActualRepo"
      },
      "maxItems": 1000,
      "title": "Actual By Repo",
      "type": "array"
    },
    "corrections_for_tomorrow": {
      "description": "Actionable corrections for tomorrow",
      "items": {
        "type": "string"
      },
      "maxItems": 1000,
      "title": "Corrections For Tomorrow",
      "type": "array"
    },
    "date": {
      "description": "ISO date (YYYY-MM-DD)",
      "title": "Date",
      "type": "string"
    },
    "drift_detected": {
      "description": "Drift detected entries",
      "items": {
        "$ref": "#/$defs/ModelDayCloseDriftDetected"
      },
      "maxItems": 1000,
      "title": "Drift Detected",
      "type": "array"
    },
    "invariants_checked": {
      "$ref": "#/$defs/ModelDayCloseInvariantsChecked",
      "description": "Invariants checked status"
    },
    "plan": {
      "description": "Planned requirements",
      "items": {
        "$ref": "#/$defs/ModelDayClosePlanItem"
      },
      "maxItems": 1000,
      "title": "Plan",
      "type": "array"
    },
    "process_changes_today": {
      "description": "Process changes made today",
      "items": {
        "$ref": "#/$defs/ModelDayCloseProcessChange"
      },
      "maxItems": 1000,
      "title": "Process Changes Today",
      "type": "array"
    },
    "risks": {
      "description": "Risk entries",
      "items": {
        "$ref": "#/$defs/ModelDayCloseRisk"
      },
      "maxItems": 1000,
      "title": "Risks",
      "type": "array"
    },
    "schema_version": {
      "description": "Schema version (SemVer format, e.g., '1.0.0')",
      "maxLength": 20,
      "title": "Schema Version",
      "type": "string"
    }
  },
  "required": [
    "schema_version",
    "date",
    "invariants_checked"
  ],
  "title": "ModelDayClose",
  "type": "object"
}
