{
  "$comment": "Exported by onex-change-control export_json_schema.py v1.0.0",
  "$defs": {
    "EnumEvidenceKind": {
      "description": "Types of evidence required for ticket contract validation.\n\nEvidence kinds specify what type of proof is required:\n- tests: Automated test coverage\n- docs: Documentation updates\n- ci: CI/CD pipeline changes\n- benchmark: Performance benchmarks\n- manual: Manual verification steps",
      "enum": [
        "tests",
        "docs",
        "ci",
        "benchmark",
        "manual"
      ],
      "title": "EnumEvidenceKind",
      "type": "string"
    },
    "EnumInterfaceSurface": {
      "description": "Categories of interface surfaces in ONEX architecture.\n\nInterface surfaces define what types of boundaries can be affected:\n- events: Event schemas/models\n- topics: Topic map, routing keys, partition keys\n- protocols: SPI protocol interfaces, public runtime interfaces\n- envelopes: Envelope models, headers\n- public_api: Exported/consumed APIs",
      "enum": [
        "events",
        "topics",
        "protocols",
        "envelopes",
        "public_api"
      ],
      "title": "EnumInterfaceSurface",
      "type": "string"
    },
    "ModelEmergencyBypass": {
      "description": "Emergency bypass configuration in ticket contract.",
      "properties": {
        "enabled": {
          "description": "Whether bypass is enabled",
          "title": "Enabled",
          "type": "boolean"
        },
        "follow_up_ticket_id": {
          "default": "",
          "description": "Follow-up ticket ID (required if enabled)",
          "maxLength": 50,
          "title": "Follow Up Ticket Id",
          "type": "string"
        },
        "justification": {
          "default": "",
          "description": "Justification for bypass (required if enabled)",
          "maxLength": 10000,
          "title": "Justification",
          "type": "string"
        }
      },
      "required": [
        "enabled"
      ],
      "title": "ModelEmergencyBypass",
      "type": "object"
    },
    "ModelEvidenceRequirement": {
      "description": "Evidence requirement in ticket contract.",
      "properties": {
        "command": {
          "anyOf": [
            {
              "maxLength": 10000,
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "How to reproduce, if applicable",
          "title": "Command"
        },
        "description": {
          "description": "What evidence must exist",
          "maxLength": 10000,
          "title": "Description",
          "type": "string"
        },
        "kind": {
          "$ref": "#/$defs/EnumEvidenceKind",
          "description": "Type of evidence"
        }
      },
      "required": [
        "kind",
        "description"
      ],
      "title": "ModelEvidenceRequirement",
      "type": "object"
    }
  },
  "description": "Ticket contract model.\n\nRepresents machine-checkable acceptance criteria and enforcement hooks\nfor a single ticket.\n\nSchema Version:\n    The schema_version field uses basic SemVer format (major.minor.patch) only.\n    Pre-release versions (e.g., \"1.0.0-alpha\") and build metadata\n    (e.g., \"1.0.0+build\") are not supported. Leading zeros are rejected\n    per SemVer specification.\n\nImmutability:\n    This model is frozen (immutable) after creation to ensure:\n    1. Ticket contracts cannot be modified after creation\n    2. Thread-safe access from multiple readers\n    3. Safe use as dictionary keys or cache entries\n\nInterface Change Validation:\n    - If interface_change=False, interfaces_touched must be empty\n    - If interface_change=True, interfaces_touched may be empty temporarily\n      (e.g., during initial contract creation before categorization is complete)\n      but should be populated before the ticket is considered complete.",
  "properties": {
    "emergency_bypass": {
      "$ref": "#/$defs/ModelEmergencyBypass",
      "description": "Emergency bypass configuration"
    },
    "evidence_requirements": {
      "description": "Evidence requirements",
      "items": {
        "$ref": "#/$defs/ModelEvidenceRequirement"
      },
      "maxItems": 1000,
      "title": "Evidence Requirements",
      "type": "array"
    },
    "interface_change": {
      "description": "Whether this ticket changes interface surfaces",
      "title": "Interface Change",
      "type": "boolean"
    },
    "interfaces_touched": {
      "description": "Interface surfaces touched by this ticket",
      "items": {
        "$ref": "#/$defs/EnumInterfaceSurface"
      },
      "maxItems": 1000,
      "title": "Interfaces Touched",
      "type": "array"
    },
    "is_seam_ticket": {
      "description": "Whether this ticket touches cross-repo interfaces",
      "title": "Is Seam Ticket",
      "type": "boolean"
    },
    "schema_version": {
      "description": "Schema version (SemVer format, e.g., '1.0.0')",
      "maxLength": 20,
      "title": "Schema Version",
      "type": "string"
    },
    "summary": {
      "description": "One-line summary",
      "maxLength": 10000,
      "title": "Summary",
      "type": "string"
    },
    "ticket_id": {
      "description": "Ticket identifier (e.g., 'OMN-962')",
      "maxLength": 50,
      "title": "Ticket Id",
      "type": "string"
    }
  },
  "required": [
    "schema_version",
    "ticket_id",
    "summary",
    "is_seam_ticket",
    "interface_change",
    "emergency_bypass"
  ],
  "title": "ModelTicketContract",
  "type": "object"
}
